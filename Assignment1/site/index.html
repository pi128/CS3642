<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Fish & Shark — WebAssembly</title>
  <style>
    html,body{height:100%;margin:0;background:#0b1320;display:grid;place-items:center}
    canvas{image-rendering: pixelated; border:1px solid #223;}
  </style>
</head>
<body>
  <canvas id="c" width="480" height="320"></canvas>

  <script src="wasm_exec.js"></script>
  <script>
    (async () => {
      const go = new Go();
      const resp = await fetch("main.wasm");
      if (!resp.ok) throw new Error("Failed to fetch main.wasm: " + resp.status);
      const bytes = await resp.arrayBuffer();                // <- no streaming; MIME doesn’t matter
      const { instance } = await WebAssembly.instantiate(bytes, go.importObject);
      go.run(instance);
    })().catch(err => {
      console.error(err);
      const pre = document.createElement('pre');
      pre.textContent = String(err?.stack || err);
      document.body.appendChild(pre);
    });
  </script>
</body>
</html>